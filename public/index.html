<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>N-Queens II Problem Solver</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.js"></script>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .chess-square {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: bold;
            border: 1px solid #333;
        }

        .light-square {
            background-color: #f0d9b5;
        }

        .dark-square {
            background-color: #b58863;
        }

        .queen {
            color: #333;
        }

        .solution-container {
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            padding: 30px;
            margin: 20px auto;
            max-width: 800px;
        }

        .board-container {
            display: inline-block;
            border: 3px solid #333;
            border-radius: 8px;
            overflow: hidden;
        }

        .count-display {
            background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);
            color: white;
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            font-size: 2rem;
            font-weight: bold;
            margin: 20px 0;
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
        }
    </style>
</head>
<body>
    <div class="min-h-screen py-8">
        <div class="solution-container">
            <h1 class="text-4xl font-bold text-center mb-8 text-gray-800">
                N-Queens II Problem Solver
            </h1>

            <div class="text-center mb-6">
                <p class="text-gray-600 mb-4">
                    Count the number of distinct solutions to place n queens on an n×n chessboard
                </p>

                <div class="flex items-center justify-center gap-4 mb-6">
                    <label for="n-input" class="font-semibold text-lg">Board Size (n):</label>
                    <input
                        id="n-input"
                        data-testid="n-input"
                        type="number"
                        min="1"
                        max="9"
                        value="4"
                        class="border-2 border-gray-300 rounded-lg px-4 py-2 w-24 text-center text-lg"
                    />
                    <button
                        id="solve-button"
                        data-testid="solve-button"
                        class="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors font-semibold"
                    >
                        Count Solutions
                    </button>
                </div>
            </div>

            <div id="results" class="text-center">
                <p class="text-gray-500">Enter a board size and click "Count Solutions" to see the result</p>
            </div>
        </div>
    </div>

    <script>
        function totalNQueens(n) {
            let count = 0;
            const cols = new Set();
            const diag1 = new Set(); 
            const diag2 = new Set(); 

            function backtrack(row) {
                if (row === n) {
                    count++;
                    return;
                }

                for (let col = 0; col < n; col++) {
                    const d1 = row - col;
                    const d2 = row + col;

                    if (cols.has(col) || diag1.has(d1) || diag2.has(d2)) {
                        continue;
                    }

                    cols.add(col);
                    diag1.add(d1);
                    diag2.add(d2);

                    backtrack(row + 1);

                    cols.delete(col);
                    diag1.delete(d1);
                    diag2.delete(d2);
                }
            }

            backtrack(0);
            return count;
        }

        function createVisualizationBoard(n) {
            const boardDiv = document.createElement('div');
            boardDiv.className = 'board-container mb-4';
            boardDiv.setAttribute('data-testid', 'chess-board');

            for (let row = 0; row < n; row++) {
                const rowDiv = document.createElement('div');
                rowDiv.style.display = 'flex';

                for (let col = 0; col < n; col++) {
                    const square = document.createElement('div');
                    square.className = `chess-square ${
                        (row + col) % 2 === 0 ? 'light-square' : 'dark-square'
                    }`;
                    rowDiv.appendChild(square);
                }

                boardDiv.appendChild(rowDiv);
            }

            return boardDiv;
        }

        function displayResult(n, count) {
            const resultsDiv = document.getElementById('results');

            if (count === 0) {
                resultsDiv.innerHTML = `
                    <div class="text-orange-600 py-4">
                        <div class="count-display bg-orange-500">
                            0 Solutions
                        </div>
                        <p>No solutions exist for n = ${n}</p>
                        <div class="mt-4">
                            ${createVisualizationBoard(n).outerHTML}
                        </div>
                    </div>
                `;
            } else {
                resultsDiv.innerHTML = `
                    <div class="text-green-600 py-4">
                        <div class="count-display" data-testid="solution-count">
                            ${count} Solution${count !== 1 ? 's' : ''}
                        </div>
                        <p class="text-lg mb-4">
                            There ${count === 1 ? 'is' : 'are'} ${count} distinct way${count !== 1 ? 's' : ''} to place ${n} queens on a ${n}×${n} chessboard
                        </p>
                        <div class="mt-4">
                            ${createVisualizationBoard(n).outerHTML}
                        </div>
                        <div class="text-sm text-gray-600 mt-4">
                            <p>Empty board shown for reference - ${count} valid arrangements exist</p>
                        </div>
                    </div>
                `;
            }
        }

        const expectedCounts = {
            1: 1, 2: 0, 3: 0, 4: 2, 5: 10, 
            6: 4, 7: 40, 8: 92, 9: 352
        };

        document.getElementById('solve-button').addEventListener('click', () => {
            const n = parseInt(document.getElementById('n-input').value);

            if (n < 1 || n > 9) {
                alert('Please enter a number between 1 and 9');
                return;
            }

            const solveButton = document.getElementById('solve-button');
            solveButton.textContent = 'Counting...';
            solveButton.disabled = true;

            setTimeout(() => {
                const startTime = performance.now();
                const count = totalNQueens(n);
                const endTime = performance.now();
                const duration = (endTime - startTime).toFixed(2);

                displayResult(n, count);

                const resultsDiv = document.getElementById('results');
                const perfInfo = document.createElement('div');
                perfInfo.className = 'text-xs text-gray-500 mt-4';
                perfInfo.innerHTML = `
                    <p>Computed in ${duration}ms</p>
                    ${expectedCounts[n] !== undefined ? 
                        `<p>✓ Matches expected count: ${expectedCounts[n]}</p>` : ''}
                `;
                resultsDiv.appendChild(perfInfo);

                solveButton.textContent = 'Count Solutions';
                solveButton.disabled = false;
            }, 100);
        });

        document.addEventListener('DOMContentLoaded', () => {
            document.getElementById('solve-button').click();
        });
    </script>
</body>
</html>